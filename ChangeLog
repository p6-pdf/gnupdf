2007-10-31  Jose E. Marchesi  <jemarch@gnu.org>

	* doc/Makefile.am (man_MANS): Added `pdf_filter.1'.

	* utils/pdf_filter.c: --version option now works.

	* bootstrap (cmd): Use autoreconf instead of the explicit chain.

	* src/pdf_stm_mem.c: Include `malloc.h' only when available.

	* src/pdf_stm_file.c: Idem.

	* src/pdf_stm_f_rl.c: Idem.

	* src/pdf_stm_f_pred.c: Idem.

	* src/pdf_stm_f_null.c: Idem.

	* src/pdf_stm_f_lzw.c: Idem.

	* src/pdf_stm_f_flate.c: Idem.

	* src/pdf_stm_f_fax.c: Idem.

	* src/pdf_stm_f_ahex.c: Idem.

	* src/pdf_stm_f_a85.c: Idem.

	* src/pdf_stm.c: Idem.

	* src/pdf_rectangle.c: Idem.

	* src/pdf_obj.c: Idem.

	* src/pdf_function.c: Idem.

	* src/pdf_date.c: Idem.

	* src/pdf_base.c: Idem.

	* configure.ac: Check for `malloc.h'.

	* `malloc' and `getline' modules imported from gnulib.

2007-10-23  Jose E. Marchesi  <jemarch@gnu.org>

	* src/pdf_stm_mem.c (pdf_stm_mem_readpeek_char): Added missing
	negation in expression.

2007-10-23  Jose E. Marchesi  <jose.marchesi@deimos-space.com>

	* utils/pdf_filter.h: New copyright holder: FSF.

	* utils/pdf_filter.c: Idem.

	* utils/Makefile.am: Idem.

	* torture/test-stm_openclose.c: Idem.

	* torture/test-rectangle.c: Idem.

	* torture/test-obj_dupequality.c: Idem.

	* torture/test-obj_dict.c: Idem.

	* torture/test-obj_createdestroy.c: Idem.

	* torture/test-obj_array.c: Idem.

	* torture/test-libinit.c: Idem.

	* torture/test-date.c: Idem.

	* torture/test-base.c: Idem.

	* torture/Makefile.am: Idem.

	* src/pdf_xref.h: Idem.

	* src/pdf_xref.c: Idem.

	* src/pdf_stm_mem.h: Idem.

	* src/pdf_stm_mem.c: Idem.

	* src/pdf_stm.h: Idem.

	* src/pdf_stm_f_rl.h: Idem.

	* src/pdf_stm_f_rl.c: Idem.

	* src/pdf_stm_f_pred.h: Idem.

	* src/pdf_stm_f_pred.c: Idem.

	* src/pdf_stm_f_null.h: Idem.

	* src/pdf_stm_f_null.c: Idem.

	* src/pdf_stm_f_lzw.h: Idem.

	* src/pdf_stm_f_lzw.c: Idem.

	* src/pdf_stm_file.h: Idem.

	* src/pdf_stm_file.c: Idem.

	* src/pdf_stm_f_flate.h: Idem.

	* src/pdf_stm_f_flate.c: Idem.

	* src/pdf_stm_f_fax.h: Idem.

	* src/pdf_stm_f_fax.c: Idem.

	* src/pdf_stm_f_ahex.h: Idem.

	* src/pdf_stm_f_ahex.c: Idem.

	* src/pdf_stm_f_a85.h: Idem.

	* src/pdf_stm_f_a85.c: Idem.

	* src/pdf_stm.c: Idem.

	* src/pdf_rectangle.h: Idem.

	* src/pdf_rectangle.c: Idem.

	* src/pdf_obj.h: Idem.

	* src/pdf_obj.c: Idem.

	* src/pdf.h: Idem.

	* src/pdf_function.h: Idem.

	* src/pdf_function.c: Idem.

	* src/pdf_date.h: Idem.

	* src/pdf_date.c: Idem.

	* src/pdf.c: Idem.

	* src/pdf_base.h: Idem.

	* src/pdf_base.c: Idem.

	* src/Makefile.am: Idem.

	* Makefile.am: Idem.

	* doc/gnupdf.texi: Idem.

	* doc/Makefile.am: Idem.

	* configure.ac: Idem.

2007-10-15  Jose E. Marchesi  <jose.marchesi@deimos-space.com>

	* src/pdf_obj.c (pdf_array_equal_p): Set `equal_p' to `PDF_FALSE'
	in element inequality.

2007-09-20  Jose E. Marchesi  <jemarch@gnu.org>

	* AUTHORS: New format.

2007-09-18  Jose E. Marchesi  <jemarch@gnu.org>

	* torture/Makefile.am (noinst_PROGRAMS): Added
	`test-stm_readwrite'.
	(TESTS): Added `test-stm_readwrite'.

	* torture/test-stm_readwrite.c (main): New file.

2007-09-15  Jose E. Marchesi  <jemarch@gnu.org>

	* src/pdf_stm.c (pdf_stm_read_char): New function.
	(pdf_stm_peek_char): New function.

	* src/Makefile.am (libgnupdf_la_SOURCES): Added `pdf_lexer.h' and
	`pdf_lexer.c'.

	* src/pdf_lexer.c: New file.

	* src/pdf_lexer.h: New file.

	* src/pdf.c (pdf_alloc_names): Duplicated allocation fixed.

	* src/pdf_obj.c (pdf_create_dict_entry): Insert a dictionary entry
	in the entries list, not just the value.

	* torture/Makefile.am (noinst_PROGRAMS): Added `test-obj_dict'.
	(TESTS): Added `test-obj_dict'.

	* torture/test-obj_dict.c: New file.

2007-09-14  Jose E. Marchesi  <jemarch@gnu.org>

	* src/pdf_stm_f_pred.c: Update copyright and author notice.

	* src/pdf_stm_f_pred.h: Update copyright and author notice.

	* src/pdf_stm_f_lzw.c: Update copyright and author notice.

	* src/pdf_stm_f_lzw.h: Update copyright and author notice.

	* torture/Makefile.am (TESTS): Added `test-libinit'
	(noinst_PROGRAMS): Added `test-libinit'

	* torture/test-libinit.c: New file.

	* src/pdf.c (pdf_dealloc_names): New function.
	(pdf_alloc_names): New function.
	(pdf_finish): New function.
	(pdf_init): New function.

	* src/pdf.h (struct pdf_globals_s): New globals data type to store
	library global information.

	* src/pdf_base.h: Added macros for PDF names preallocation.

2007-09-12  Jose E. Marchesi  <jemarch@gnu.org>

	* src/pdf_rectangle.c (pdf_create_rectangle): Avoid to call
	`pdf_rectangle_set_ll'.

2007-09-11  Jose E. Marchesi  <jemarch@gnu.org>

	* src/Makefile.am (libgnupdf_la_SOURCES): `pdf_function.h' and
	`pdf_function.c' added.

	* src/pdf_function.h: New file.

	* src/pdf_function.c: New file.

	* src/pdf_stm_file.c (pdf_stm_file_size): Use NO_POS.

	* src/pdf_obj.c (pdf_create_stream): New function.
	(pdf_get_stream_stm): New function.
	(pdf_get_stream_data): New function.
	(pdf_stream_equal_p): New function.
	(pdf_stream_dup): New function.

	* configure.ac: Check for `-lm'.

	* src/pdf_base.c (pdf_interp_lineal): New function.
	(pdf_interp_exp_coef_m): New function.
	(pdf_interp_exp_coef_k): New function.
	(pdf_interp_exp): New function.

2007-09-09  Jose E. Marchesi  <jemarch@gnu.org>

	* torture/Makefile.am (noinst_PROGRAMS): `test-rectangle' added.
	(TESTS): `test-rectangle' added.

	* torture/test-rectangle.c: New file.

	* src/Makefile.am (libgnupdf_la_SOURCES): `pdf_rectangle.c' and
	`pdf_rectangle.h' added.

	* src/pdf_base.c (pdf_create_point): New function.
	(pdf_destroy_point): New function.

	* src/pdf_base.h: New `pdf_point_t' type.

	* src/pdf_rectangle.c: New file.

	* src/pdf_rectangle.h: New file.

	* torture/test-date.c (main): Initialize `success' to `PDF_TRUE'.

2007-09-08  Jose E. Marchesi  <jemarch@gnu.org>

	* torture/Makefile.am (TESTS): Added `test-date'.
	(noinst_PROGRAMS): Added `test-date'.

	* src/pdf_date.c (pdf_date_ut_offset_hour): New function.
	(pdf_date_ut_offset_minute): New function.

	* torture/test-base.c: New file.

	* src/pdf_date.c (pdf_date_parse): New function.

	* src/pdf_base.c (pdf_str2double): New function.
	(pdf_str2int): New function.

	* src/Makefile.am (libgnupdf_la_SOURCES): Added `pdf_base.c' and
	`pdf_base.h'.

	* src/pdf_base.c (pdf_str2long): New function.

	* src/pdf_base.h: Include `config.h' first.
	String utilities prototypes added.

	* AUTHORS (Contributors): Added raskolnikov@es.gnu.org

	* src/pdf_date.h: Added an explanation about the date objects.

	* src/pdf_obj.h: Fixed a typo in comment.

2007-09-07  Jose E. Marchesi  <jemarch@gnu.org>

	* src/pdf_date.c (pdf_date_second): `pdf_date_get_FOO'
	functions shortened to `pdf_date_FOO'.

2007-09-06  Jose E. Marchesi  <jemarch@gnu.org>

	* src/pdf_date.c (pdf_date_destroy): New function.
	(pdf_date_get_year): New function.
	(pdf_date_set_year): New function.
	(pdf_date_get_month): New function.
	(pdf_date_set_month): New function.
	(pdf_date_get_day): New function.
	(pdf_date_set_day): New function.
	(pdf_date_get_hour): New function.
	(pdf_date_set_hour): New function.
	(pdf_date_get_minute): New function.
	(pdf_date_set_minute): New function.
	(pdf_date_get_second): New function.
	(pdf_date_set_second): New function.

2007-09-05  Jose E. Marchesi  <jemarch@gnu.org>

	* src/Makefile.am (libgnupdf_la_SOURCES): `pdf_date.h' and
	`pdf_date.c' added.

	* src/pdf_date.c (pdf_date_alloc): New function.
	(pdf_date_dealloc): New function.
	(pdf_date_new_value): New function.

	* src/pdf_date.h: New file.

	* utils/pdf_filter.c: Fix incorrect help entry for the predictor
	decoder option.

2007-09-05  Juan Pedro Bolívar Puente <raskolnikov@es.gnu.org>

	* src/pdf_stm_f_lzw.c: Fully implemented the LZW filter for both
	encoding and decoding.

	* src/pdf_stm_f_pred.c: Solved a bug in the order in which bytes
	where written when packing tiff pixels.

	* utils/pdf_filter.c: Now lzw and predictor filters can get their
	arguments from the command line.

2007-08-15  Jose E. Marchesi  <jemarch@gnu.org>

	* src/pdf_stm.c (pdf_stm_install_lzwenc_filter): New function.
	(pdf_stm_install_lzwdec_filter): New function.

	* src/Makefile.am (libgnupdf_la_SOURCES): Added lzw filter sources.

	* src/pdf_stm_f_lzw.c: New file.
	(pdf_stm_f_lzw_init): New function.
	(pdf_stm_f_lzw_apply): New function.
	(pdf_stm_f_lzw_dealloc): New function.
	(pdf_stm_f_lzw_encode): New function.
	(pdf_stm_f_lzw_decode): New function.

	* src/pdf_stm_f_lzw.h: New file.

2007-08-05  Jose E. Marchesi  <jemarch@gnu.org>

	* src/pdf_stm_f_fax.c (pdf_stm_f_fax_dealloc): New function.

	* src/pdf_stm.c (pdf_stm_install_faxenc_filter): New function.
	(pdf_stm_install_faxdec_filter): New function.

	* src/pdf_stm.h: New prototype for the fax filter.

	* src/Makefile.am (libgnupdf_la_SOURCES): Added fax filter source
	files.

	* src/pdf_stm_f_fax.c: New file.
	(pdf_stm_f_fax_init): New function.
	(pdf_stm_f_fax_apply): New function.
	(pdf_stm_f_fax_encode): New function.
	(pdf_stm_f_fax_decode): New function.

	* src/pdf_stm_f_fax.h: New file.

2007-07-31  Jose E. Marchesi  <jemarch@gnu.org>

	* utils/pdf_filter.c (GNU_longOptions): Predictor command line
	arguments.

2007-07-28  Juan Pedro Bolívar Puente <raskolnikov@es.gnu.org>

	* src/pdf_stm_f_pred.c: PNG and TIFF predictor filters
	implemented.

	* src/pdf_stm_f_pred.h: Changed filter types, added filter
	modes (encoding or decoding) and such things needed by the filter
	implementation.

	* util/pdf_filter.c: Added an entry with hardcoded params to test
	the predictor filter.

2007-07-22  Jose E. Marchesi  <jemarch@gnu.org>

	* src/pdf_stm_f_ahex.c: Missing headers added.
	(pdf_stm_f_ahex_white_p): Conform to GCS.

	* src/pdf_stm_f_rl.c (pdf_stm_f_rl_encode): Fix input pointer
	position in the loop.
	(pdf_stm_f_rl_encode): Fix the upper bound of output size.

2007-07-15  Jose E. Marchesi  <jemarch@gnu.org>

	* src/Makefile.am (libgnupdf_la_SOURCES): `pdf_stm_f_rl.h' and
	`pdf_stm_f_rl.c' added.

	* src/pdf_stm.c (pdf_stm_install_rldec_filter): New function.
	(pdf_stm_install_rlenc_filter): New function.

	* src/pdf_stm_f_rl.c: New file.

	* src/pdf_stm_f_rl.h: New file.

	* src/pdf_stm_f_a85.c: New file.

	* src/pdf_stm_f_a85.h: New file.

	* src/pdf_stm_f_flate.c: Renamed from src/pdf_stm_f_fdec.c

	* src/pdf_stm_f_flate.h: Renamed from src/pdf_stm_f_fdec.h

	* src/pdf_stm.c (pdf_stm_install_flateenc_filter): New function.

2007-07-14  Jose E. Marchesi  <jemarch@gnu.org>

	* src/pdf_stm_f_ahex.c (pdf_stm_f_ahex_encode): Fix indirection.

2007-07-13  Jose E. Marchesi  <jemarch@gnu.org>

	* utils/pdf_filter.c (main): Added support for ascii hex decoder.

	* src/pdf_stm.c (pdf_stm_install_ahexdec_filter): New function.

	* src/Makefile.am (libgnupdf_la_SOURCES): `pdf_stm_f_ahdec.h' and
	`pdf_stm_f_ahdec.c' added.

	* src/pdf_stm_f_ahdec.c (pdf_stm_f_ahdec_apply): New file.

	* src/pdf_stm_f_ahdec.h: New file.

	* src/pdf_stm_file.c (pdf_stm_file_peek): Interface changed.

	* src/pdf_stm_mem.c: Interface changed.

2007-07-12  Jose E. Marchesi  <jemarch@gnu.org>

	* src/pdf_stm.h: Changed interface.

	* src/Makefile.am (libgnupdf_la_SOURCES): `pdf_stm_f_pred.h' and
	`pdf_stm_f_pred.c' added.

	* src/pdf_stm_f_pred.c (pdf_stm_f_pred_init): New function.
	(pdf_stm_f_pred_apply): New function.
	(pdf_stm_f_pred_dealloc): New function.

	* src/pdf_stm_f_pred.h: New file.

2007-07-11  Jose E. Marchesi  <jemarch@gnu.org>

	* src/pdf_stm_f_fdec.h (struct pdf_stm_f_fdec_conf_s):
	Configuration parameters added.
	(enum pdf_stm_f_fdec_pred): Added.

2007-07-11  Jose E. Marchesi  <jose.marchesi@deimos-space.com>

	* utils/pdf_filter.c (main): Use the fdec filter conditionally.

	* src/Makefile.am (libgnupdf_la_SOURCES): Add fdec sources
	conditionally.

	* src/pdf_stm.c: Make the fdec filter conditional.

	* m4/getopt.m4: Imported from gnulib.

2007-07-10  Jose E. Marchesi  <jemarch@gnu.org>

	* m4/zlib.m4 (ZLIB_HOME): Imported from the autoconf macro
	archive (by Loic Dachary).

	* src/Makefile.am (libgnupdf_la_SOURCES): `pdf_stm_f_fdec.h' and
	`pdf_stm_f_fdec.c' added.

	* src/pdf_stm.c (pdf_stm_install_fdec_filter): New function.
	Include `stm_stm_f_fdec.h'.

	* src/pdf_stm_f_fdec.c (pdf_stm_f_fdec_apply): New file.

	* src/pdf_stm_f_fdec.h: New file.

	* src/pdf_stm.c (pdf_create_mem_stm): Install the close hook.

	* src/pdf_stm_mem.c (pdf_stm_mem_init): Manage `resize_p'.
	(pdf_stm_mem_write): Manage `resize_p'.

	* utils/pdf_filter.c (main): Added dummy main function.

	* configure.ac: `utils' added.

	* Makefile.am (SUBDIRS): `utils' added.

	* utils/pdf_filter.h: New file.

	* utils/pdf_filter.c: New file.

	* utils/README: New file.

2007-07-10  Jose E. Marchesi  <jose.marchesi@deimos-space.com>

	* src/pdf_stm.c (pdf_stm_close): Fix argument.

2007-07-09  Jose E. Marchesi  <jemarch@gnu.org>

	* torture/test-stm_openclose.c (main): New file.

	* src/pdf_stm.c (pdf_create_mem_stm): New function.
	(pdf_stm_uninstall_filters): New function.

	* src/Makefile.am (libgnupdf_la_SOURCES): `pdf_stm_f_null.c' and
	`pdf_stm_f_null.h' added.

	* src/pdf_stm_f_null.c (pdf_stm_f_null_init): New function.
	(pdf_stm_f_null_apply): New function.
	(pdf_stm_f_null_dealloc): New function.

	* src/pdf_stm.c (pdf_create_file_stm): New function.
	(pdf_stm_alloc): New function.
	(pdf_stm_dealloc): New function.
	(pdf_stm_install_filter): New function.
	(pdf_stm_filter_dealloc_list): New function.
	(pdf_stm_apply_filters): New function.

	* src/pdf_stm_f_null.c: New file.

	* src/pdf_stm_f_null.h: New file.

2007-07-08  Jose E. Marchesi  <jemarch@gnu.org>

	* src/Makefile.am (AM_CFLAGS): `-Wall' added.
	(libgnupdf_la_SOURCES): Changed io to stream.

2007-07-07  Jose E. Marchesi  <jemarch@gnu.org>

	* src/Makefile.am (libgnupdf_la_SOURCES): Added `pdf_xref.h' and
	`pdf_xref.c'.

	* src/pdf_xref.c: New file.

	* src/pdf_xref.h: New file.

	* src/pdf_obj.c (pdf_get_bool): New function.
	(pdf_set_bool): New function.
	(pdf_get_int): New function.
	(pdf_set_real): New function.
	(pdf_get_real): New function.
	(pdf_set_int): New function.
	(pdf_get_string_size): New function.
	(pdf_get_string_data): New function.
	(pdf_get_name_size): New function.
	(pdf_get_name_data): New function.
	(pdf_get_array_size): New function.
	(pdf_get_dict_size): New function.
	(pdf_obj_equal_p): New function.
	(pdf_string_equal_p): New function.
	(pdf_string_equal_p): New function.
	(pdf_compare_obj_list_elt): Use `pdf_obj_equal_p'.
	(pdf_obj_dup): New function.
	(pdf_array_dup): New function.
	(pdf_dict_dup): New function.
	(pdf_remove_array_elt): New function.
	(pdf_get_array_elt): New function.
	(pdf_set_array_elt): New function.
	(pdf_add_array_elt): New function.
	(pdf_dict_entry_p): New function.
	(pdf_get_dict_entry): New function.
	(pdf_remove_dict_entry): New function.
	(pdf_create_dict_entry): New function.
	(pdf_append_array_elt): New function.

	* torture/Makefile.am: New testsuite, `test-obj_createdestroy'.

	* torture/test-obj_createdestroy.c: New file.

	* src/pdf_obj.c (pdf_create_dict): Disallow duplicates in
	dictionary.
	(pdf_destroy_obj): New function.

	* configure.ac: Added `doc/Makefile' to output files.

	* src/pdf_obj.c (pdf_create_null): New function.
	(pdf_alloc_obj): New function.
	(pdf_create_boolean): New function.
	(pdf_create_int): New function.
	(pdf_create_real): New function.
	(pdf_create_string): New function.
	(pdf_create_array): New function.
	(pdf_create_dict): New function.
	(pdf_create_indirect): New function.
	(pdf_dealloc_obj): New function.
	(pdf_list_dealloc_obj): New function.
	(pdf_alloc_dict_entry): New function.
	(pdf_dealloc_dict_entry): New function.
	(pdf_list_dealloc_dict_entry): New function.
	(pdf_dealloc_dict_entry_list_elm): New function.

	* src/Makefile.am (libgnupdf_la_SOURCES): `pdf_obj.c' added.

	* src/pdf_obj.c: New file.

	* src/Makefile.am (libgnupdf_la_SOURCES): `pdf_obj.h' added.

	* src/pdf_obj.h: New file.

	* torture/test-io_openclose.c (main): Added file size retrieving
	test.

2007-07-06  Jose E. Marchesi  <jemarch@gnu.org>

	* configure.ac: Check for `off_t'.
	Check for `fseeko' availability.

	* src/pdf_io.c (pdf_io_tell): New function.
	(pdf_io_write): New function.

	* src/pdf_base.h: New file.

	* src/pdf_io.c (pdf_io_close): New function.
	(pdf_io_seek_beg): New function.
	(pdf_io_seek_cur): New function.
	(pdf_io_seek_end): New function.

	* src/Makefile.am (libgnupdf_la_SOURCES): Added `pdf_io.c' and
	`pdf_io.h'.
	(AM_CPPFLAGS): Added the gnulib imported directory.

	* src/pdf_io.c (pdf_io_open_file): New function.

	* m4/xalloc.m4: Imported from gnulib.

	* m4/unistd_h.m4: Imported from gnulib.

	* m4/stdlib_h.m4: Imported from gnulib.

	* m4/onceonly_2_57.m4: Imported from gnulib.

	* m4/inline.m4: Imported from gnulib.

	* m4/include_next.m4: Imported from gnulib.

	* m4/gnulib-tool.m4: Imported from gnulib.

	* m4/gnulib-comp.m4: Imported from gnulib.

	* m4/gnulib-common.m4: Imported from gnulib.

	* m4/gnulib-cache.m4: Imported from gnulib.

	* m4/exitfail.m4: Imported from gnulib.

	* m4/error.m4: Imported from gnulib.

	* lib/xmalloc.c: Imported from gnulib.

	* lib/xalloc.h: Imported from gnulib.

	* lib/xalloc-die.c: Imported from gnulib.

	* lib/unistd_.h: Imported from gnulib.

	* lib/stdlib_.h: Imported from gnulib.

	* lib/Makefile.am: Imported from gnulib.

	* lib/gettext.h: Imported from gnulib.

	* lib/exitfail.h: Imported from gnulib.

	* lib/exitfail.c: Imported from gnulib.

	* lib/error.h: Imported from gnulib.

	* lib/error.c: Imported from gnulib.

	* Makefile.am (ACLOCAL_AMFLAGS): Mention "-I m4".
	(SUBDIRS): Added "lib" subdirectory.

	* configure.ac: New gnulib macros.

	* src/pdf_io.c: New file.

	* src/pdf_io.h: New file.

2007-07-05  Jose E. Marchesi  <jemarch@gnu.org>

	* src/pdf.c: New file.

	* src/pdf.h: End of file comment added.

	* src/Makefile.am (libgnupdf_la_SOURCES): `pdf.h' should be
	installed.

	* bootstrap: `libtoolize' added.

	* .cvsignore: New file.

	* src/Makefile.am (lib_LTLIBRARIES): add `lib_' prefix to
	LTLIBRARIES primary.

	* bootstrap: New file.

	* AUTHORS: New file.

	* NEWS: New file.

	* src/pdf.h: New file.

	* ChangeLog started.

